<!DOCTYPE html>
<html>
<head>
	<title>ProjectX</title>
	<%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
	<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>. <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
	<%= javascript_include_tag 'http://maps.google.com/maps/api/js?sensor=true' %>
	<%= javascript_include_tag 'application' %>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<%= csrf_meta_tags %>
</head>
<body>

<header>

	<div class="container">
		<div id="logo">
			<a href="/"><img src="/images/logo.png" /></a>
		</div>
		<div id="navigation">
			<ul class="list-unstyled list-inline">
				<li><%= link_to 'Browse <i class="glyphicon glyphicon-shopping-cart"></i>'.html_safe, '/' %></li><li><%= link_to 'Sell <i class="glyphicon glyphicon-usd"></i>'.html_safe, new_listing_path %>
			</ul>
		</div>
		<div id="header-right">
			<div id="user-chat">
				<%= link_to('<i class="glyphicon glyphicon-comment"></i>'.html_safe, '/') %>
			</div>
			<div id="user-menu">
				<% if current_user %>
					<div class="dropdown-toggle" data-toggle="dropdown">
						<% if current_user.avatar.blank? %>
							<img src="/images/default_avatar.jpg" width="30" alt="Default avatar" class="img-circle" />
						<% else %>
							<img src="<%= current_user.avatar %>" width="30" alt="Default avatar" class="img-circle" />
						<% end %>
						<%= current_user.first_name %> <span class="caret"></span>
					</div>
					<ul class="dropdown-menu" role="menu">
						<li>
							<%= link_to user_profile_path do %>
								<i class="glyphicon glyphicon-user"></i>
								&nbsp;View Profile
							<% end %>
						</li>
						<li>
							<%= link_to edit_user_registration_path do %>
								<i class="glyphicon glyphicon-pencil"></i>
								&nbsp;Edit Profile
							<% end %>
						</li>
						<li>
							<%= link_to('<i class="glyphicon glyphicon-log-out"></i>
								&nbsp;Sign Out'.html_safe, destroy_user_session_path, :method => :delete) %>
						</li>
					</ul>
				<% else %>
					<%= link_to('Sign in', new_user_session_path, id: 'sign-in-link') %>
				<% end %>
			</div>
			<div id="search">
				<%= form_tag(listings_path, :method => "get", id: "search-form", class: 'form') do %>
					<%= text_field_tag :search, params[:search], placeholder: "e.g. shoes", class: 'form-control' %>
					<%= button_tag(type: 'submit', class: 'magnifying-btn') do %>
						<i class="glyphicon glyphicon-search"></i>
					<% end %>
				<% end %>
			</div>
		</div>
		<button id="menu-btn" type="button" class="navbar-toggle" data-toggle="collapse" data-target="#user-device-menu">
			<span class="sr-only">Toggle navigation</span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
		</button>
		<div class="collapse navbar-collapse" id="user-device-menu">
			<ul class="nav navbar-nav visible-xs text-right">
				<% if current_user %>
					<li id="user-id">
						<% if current_user.avatar.blank? %>
							<img src="/images/default_avatar.jpg" width="30" alt="Default avatar" class="img-circle" />
						<% else %>
							<img src="<%= current_user.avatar %>" width="30" alt="Default avatar" class="img-circle" />
						<% end %>
						&nbsp;<%= current_user.first_name %>
					</li>
					<li>
						<%= link_to user_profile_path do %>
							<i class="glyphicon glyphicon-user"></i>
							&nbsp;View Profile
						<% end %>
					</li>
					<li>
						<%= link_to edit_user_registration_path do %>
							<i class="glyphicon glyphicon-pencil"></i>
							&nbsp;Edit Profile
						<% end %>
					</li>
					<li>
						<%= link_to('<i class="glyphicon glyphicon-log-out"></i>
							&nbsp;Sign Out'.html_safe, destroy_user_session_path, :method => :delete) %>
					</li>
				<% else %>
					<li>
						<%= link_to(new_user_session_path) do %>
							<i class="glyphicon glyphicon-log-in"></i>
							&nbsp;Sign In
						<% end %>
					</li>
				<% end %>
			</ul>
		</div>
		<div class="clearfix"></div>
		<%= form_tag(listings_path, :method => "get", id: "search-device", class: 'form visible-sm visible-xs') do %>
			<%= text_field_tag :search, params[:search], placeholder: "e.g. shoes", class: 'form-control' %>
			<%= button_tag(type: 'submit') do %>
				<i class="glyphicon glyphicon-search"></i>
			<% end %>
		<% end %>
	</div>
</header>

<% if flash[:notice] %>
	<div class="container">
		<div class="alert alert-success">
			<%= flash[:notice] %>
		</div>
	</div>
<% end %>

<%= yield %>

</body>
</html>
